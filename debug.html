<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>调试页面</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .debug-info {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 10px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .status {
            padding: 10px;
            margin: 5px 0;
            border-radius: 4px;
        }
        .success { background-color: #d4edda; color: #155724; }
        .error { background-color: #f8d7da; color: #721c24; }
        .warning { background-color: #fff3cd; color: #856404; }
    </style>
</head>
<body>
    <h1>GitHub Pages 部署调试</h1>
    
    <div class="debug-info">
        <h2>资源加载测试</h2>
        <div id="html-status" class="status">HTML: 检查中...</div>
        <div id="css-status" class="status">CSS: 检查中...</div>
        <div id="js-status" class="status">JavaScript: 检查中...</div>
    </div>
    
    <div class="debug-info">
        <h2>控制台错误</h2>
        <div id="console-errors"></div>
    </div>
    
    <div class="debug-info">
        <h2>网络请求状态</h2>
        <div id="network-status"></div>
    </div>

    <script>
        // 捕获控制台错误
        const originalError = console.error;
        const errors = [];
        console.error = function(...args) {
            errors.push(args.join(' '));
            originalError.apply(console, args);
            updateConsoleErrors();
        };

        function updateConsoleErrors() {
            const container = document.getElementById('console-errors');
            if (errors.length === 0) {
                container.innerHTML = '<div class="status success">无控制台错误</div>';
            } else {
                container.innerHTML = errors.map(error => 
                    `<div class="status error">${error}</div>`
                ).join('');
            }
        }

        // 测试资源加载
        async function testResource(url, elementId, name) {
            try {
                const response = await fetch(url);
                const element = document.getElementById(elementId);
                if (response.ok) {
                    element.textContent = `${name}: 成功 (${response.status})`;
                    element.className = 'status success';
                } else {
                    element.textContent = `${name}: 失败 (${response.status})`;
                    element.className = 'status error';
                }
            } catch (error) {
                const element = document.getElementById(elementId);
                element.textContent = `${name}: 错误 - ${error.message}`;
                element.className = 'status error';
            }
        }

        // 测试主应用
        async function testMainApp() {
            try {
                const response = await fetch('https://zxy36277-jpg.github.io/-coolroot/');
                const html = await response.text();
                const element = document.getElementById('html-status');
                if (response.ok && html.includes('短视频电商运营脚本助手')) {
                    element.textContent = 'HTML: 成功加载';
                    element.className = 'status success';
                } else {
                    element.textContent = 'HTML: 内容异常';
                    element.className = 'status warning';
                }
            } catch (error) {
                const element = document.getElementById('html-status');
                element.textContent = `HTML: 错误 - ${error.message}`;
                element.className = 'status error';
            }
        }

        // 运行测试
        window.addEventListener('load', () => {
            testMainApp();
            testResource('https://zxy36277-jpg.github.io/-coolroot/assets/index-f67fbc39.js', 'js-status', 'JavaScript');
            testResource('https://zxy36277-jpg.github.io/-coolroot/assets/index-e0be615f.css', 'css-status', 'CSS');
            
            // 检查网络状态
            const networkStatus = document.getElementById('network-status');
            if (navigator.onLine) {
                networkStatus.innerHTML = '<div class="status success">网络连接正常</div>';
            } else {
                networkStatus.innerHTML = '<div class="status error">网络连接异常</div>';
            }
        });

        // 监听网络状态变化
        window.addEventListener('online', () => {
            document.getElementById('network-status').innerHTML = '<div class="status success">网络连接正常</div>';
        });

        window.addEventListener('offline', () => {
            document.getElementById('network-status').innerHTML = '<div class="status error">网络连接异常</div>';
        });
    </script>
</body>
</html>
